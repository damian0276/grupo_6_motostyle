<!DOCTYPE html>
<html lang="en">
<!--Head-->
<%- include('../partials/head') %>

    <body>
        <section id="all-container">
            <!--Header-->
            <%- include('../partials/headerAdmin') %>
            <!--Modal de login-->
            <%- include('../partials/loginModal') %>
            <!-- Sección general -->
            <section>
                <div class="solapas">
                    <div class="titulo col-12">
                        <h3>Carga Nuevos Productos</h3>
                    </div>
                    <div>
                        <form id="form-productAdd" action="/administrar/create" method="POST" enctype="multipart/form-data">
                            <div>
                                <div class="contenedor mt-1">
                                    <div class="formulario">
                                        <div class="formu">
                                            <% if(typeof(errors) != 'undefined' && errors.brand){%>
                                            <div class="text-danger text-center">
                                                <%= errors.brand.msg %>
                                            </div>
                                            <%}%>
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <label class="input-group-text" for="inputGroupSelect01">Marcas</label>
                                                </div>
                                                <select name="brand" class="custom-select" id="inputGroupSelect01">
                                                    <option selected disabled>Seleccionar</option>
                                                    <% brands.forEach(brand => { %>
                                                    <option value="<%= brand.id %>" <%= typeof old != 'undefined' ? old.brand == brand.id ? 'selected ' : null : null %>><%= brand.name %></option>
                                                    <% }) %>
                                                </select>
                                            </div>
                                            <% if(typeof(errors) != 'undefined' && errors.model){%>
                                            <div class="text-danger text-center">
                                                <%= errors.model.msg %>
                                            </div>
                                            <%}%>
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">Modelo</span>
                                                </div>
                                                <textarea name="model" class="form-control" aria-label="With textarea" placeholder="" ><%= typeof old != 'undefined' ? old.model : '' %></textarea>
                                            </div>
                                            <% if(typeof(errors) != 'undefined' && errors.color){%>
                                            <div class="text-danger text-center">
                                                <%= errors.color.msg %>
                                            </div>
                                            <%}%>
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <label class="input-group-text" for="inputGroupSelect01">Color</label>
                                                </div>
                                                <select name="color" class="custom-select" id="inputGroupSelect01">
                                                    <option selected disabled>Seleccionar</option>
                                                    <% colors.forEach(color => { %>
                                                    <option value="<%= color.id %>" <%= typeof old != 'undefined' ? old.color == color.id ? 'selected ' : null : null %>><%= color.name %></option>
                                                    <% }) %>
                                                </select>
                                            </div>
                                            <% if(typeof(errors) != 'undefined' && errors.cc){%>
                                            <div class="text-danger text-center">
                                                <%= errors.cc.msg %>
                                            </div>
                                            <%}%>
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">Cilindrada</span>
                                                </div>
                                                <input class="form-control" type="number" name="cc" id="cc" value="<%= typeof old != 'undefined' ? old.cc : '' %>" placeholder="" >
                                            </div>
                                            <% if(typeof(errors) != 'undefined' && errors.brakes){%>
                                            <div class="text-danger text-center">
                                                <%= errors.brakes.msg %>
                                            </div>
                                            <%}%>
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <label class="input-group-text" for="inputGroupSelect01">Frenos</label>
                                                </div>
                                                <select name="brakes" class="custom-select" id="inputGroupSelect01">
                                                    <option selected disabled>Seleccionar</option>
                                                    <option value="Disco delantero"<%= typeof old != 'undefined' ? old.brakes == "Disco delantero" ? 'selected ' : null : null %>>Disco delantero</option>
                                                    <option value="Disco delantero y trasero"<%= typeof old != 'undefined' ? old.brakes == "Disco delantero y trasero" ? 'selected ' : null : null %>>Disco delantero y trasero</option>
                                                    <option value="Doble disco"<%= typeof old != 'undefined' ? old.brakes == "Doble disco" ? 'selected ' : null : null %>>Doble disco</option>
                                                </select>
                                            </div>
                                            <% if(typeof(errors) != 'undefined' && errors.stock){%>
                                            <div class="text-danger text-center">
                                                <%= errors.stock.msg %>
                                            </div>
                                            <%}%>
                                            <div class="input-group">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">Cantidad</span>
                                                </div>
                                                <input class="form-control" type="number" name="stock" id="stock" value="<%= typeof old != 'undefined' ? old.stock : '' %>">
                                            </div>
                                            <hr />
                                            <!-- Precio -->
                                            <h5>Precio</h5>
                                            <div>
                                                <ul id="errorsPrice" class="danger alert-danger rounded">
                                                </ul>
                                            </div>
                                            <% if(typeof(errors) != 'undefined' && errors.coin){%>
                                            <div class="text-danger text-center">
                                                <%= errors.coin.msg %>
                                            </div>
                                            <%}%>
                                            <% if(typeof(errors) != 'undefined' && errors.iva){%>
                                            <div class="text-danger text-center">
                                                <%= errors.iva.msg %>
                                            </div>
                                            <%}%>
                                            <% if(typeof(errors) != 'undefined' && errors.gross){%>
                                            <div class="text-danger text-center">
                                                <%= errors.gross.msg %>
                                            </div>
                                            <%}%>
                                            <div class="flex-container">
                                                <div>
                                                    <h6>Moneda</h6>
                                                    <div class="form-group btc">
                                                        <select name="coin" class="custom-select" id="validationCustom04">
                                                            <option selected disabled>Elije una moneda...</option>
                                                            <option value="u$s" <%= typeof old != 'undefined' ? old.coin == "u$s" ? 'selected ' : null : null %>>Dolar</option>
                                                            <option value="$" <%= typeof old != 'undefined' ? old.coin == "$" ? 'selected ' : null : null %>>Peso</option>
                                                            <option value="€" <%= typeof old != 'undefined' ? old.coin == "€" ? 'selected ' : null : null %>>Euro</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div>
                                                    <h6>IVA</h6>
                                                    <div class="form-group">
                                                        <input type="number" class="form-control" name="iva" value="<%= typeof old != 'undefined' ? old.iva : 21 %>">
                                                    </div>
                                                </div>
                                                <div>
                                                    <h6>Bruto</h6>
                                                    <div class="form-group">
                                                        <input type="number" class="form-control" name="gross" value="<%= typeof old != 'undefined' ? old.gross : '' %>">
                                                    </div>
                                                </div>
                                            </div>
                                            <hr />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div clas="container-fluid">
                                <div class="paso2 row">
                                    <!-- imagen portada -->
                                    <div class="col-12 col-md-6 col-lg-12 d-lg-flex justify-content-lg-center">
                                        <figure class="figure-portada">
                                            <h4>Imagen de la portada</h4>
                                            <img id="preview-cover-img" class="w-100 border-1 p-1 preview-img" src="/asset/img/productos/yamaha-tracer-900/completa2.jpg" alt="imagen">
                                            <% if(typeof(errors) != 'undefined' && errors.imagenPortada){%>
                                            <div class="text-danger text-center">
                                                <%= errors.imagenPortada.msg %>
                                            </div>
                                            <%}%>
                                            <div class="text-danger" id="error-imagePortada"></div>
                                            <input type="file" name="imagenPortada" class="botonImg coverImage-input">
                                        </figure>
                                    </div>
                                    <figure class="col-12 col-md-6 col-lg-3 foto">
                                        <img id="preview-img1" class="w-100 border-1 p-1 preview-img" src="/asset/img/productos/yamaha-tracer-900/completa2.jpg" alt="imagen">
                                        <% if(typeof(errors) != 'undefined' && errors.imagen1){%>
                                        <div class="text-danger text-center">
                                            <%= errors.imagen1.msg %>
                                        </div>
                                        <%}%>
                                        <div class="text-danger error-image-div"></div>
                                        <input type="file" name="imagen1" class="botonImg" />
                                    </figure>
                                    <figure class="col-12 col-md-6 col-lg-3 foto">
                                        <img id="preview-img2" class="w-100 border-1 p-1 preview-img" src="/asset/img/productos/yamaha-tracer-900/completa3.jpg" alt="imagen">
                                        <% if(typeof(errors) != 'undefined' && errors.imagen2){%>
                                        <div class="text-danger text-center">
                                            <%= errors.imagen2.msg %>
                                        </div>
                                        <%}%>
                                        <div class="text-danger error-image-div"></div>
                                        <input type="file" name="imagen2" class="botonImg" />
                                    </figure>
                                    <figure class="col-12 col-md-6 col-lg-3 foto">
                                        <img id="preview-img3" class="w-100 border-1 p-1 preview-img" src="/asset/img/productos/yamaha-tracer-900/costado.jpg" alt="imagen">
                                        <% if(typeof(errors) != 'undefined' && errors.imagen3){%>
                                        <div class="text-danger text-center">
                                            <%= errors.imagen3.msg %>
                                        </div>
                                        <%}%>
                                        <div class="text-danger error-image-div"></div>
                                        <input type="file" name="imagen3" class="botonImg" />
                                    </figure>
                                    <figure class="col-12 col-md-6 col-lg-3 foto">
                                        <img id="preview-img4" class="w-100 border-1 p-1 preview-img" src="/asset/img/productos/yamaha-tracer-900/frente.jpg" alt="imagen">
                                        <% if(typeof(errors) != 'undefined' && errors.imagen4){%>
                                        <div class="text-danger text-center">
                                            <%= errors.imagen4.msg %>
                                        </div>
                                        <%}%>
                                        <div class="text-danger error-image-div"></div>
                                        <input type="file" name="imagen4" class="botonImg" />
                                    </figure>
                                    <div class="col-12">
                                        <div class="custom--file">
                                            <div class="texta col-12 w-100">
                                                <% if(typeof(errors) != 'undefined' && errors.description){%>
                                                <div class="text-danger text-center">
                                                    <%= errors.description.msg %>
                                                </div>
                                                <%}%>
                                                <p><label for="description">Descripción</label></p>
                                                <div id="description-errors" class="text-danger"></div>
                                                <textarea name="description" id="descripcion" cols="35" rows="8"><%= typeof old != 'undefined' ? old.description: '' %></textarea>
                                                <% if(typeof(errors) != 'undefined' && errors.specification){%>
                                                <div class="text-danger text-center">
                                                    <%= errors.specification.msg %>
                                                </div>
                                                <%}%>
                                                <p><label for="specification">Especificaciones</label></p>
                                                <div id="specification-errors" class="text-danger"></div>
                                                <textarea name="specification" id="especificaciones" cols="35" rows="8"><%= typeof old != 'undefined' ? old.specification : '' %></textarea>
                                            </div>
                                            <div class="form-group guardar">
                                                <a href="/administrar" class="btm btn-primary">Volver</a>
                                                <button type="submit" class="btm">Guardar</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
            <!--Footer-->
            <%- include('../partials/footer') %>
        </section>
        <!--Script de boostrap-->
        <%- include('../partials/scripts') %>
        <script src="/js/imagesPreview.js"></script>
        <script src="/js/productAdd.js"></script>
    </body>
</html>